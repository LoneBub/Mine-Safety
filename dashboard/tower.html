<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>sentury tower</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      #chart-container {
        width: 300px;
        height: 200px;
      }
    </style>
  </head>
  <body>
    <h1>sentery tower Readings</h1>
    <div id="data"></div>
    <div id="chart-container">
      <canvas id="myChart"></canvas>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        fetch("data1.json")
          .then((response) => response.json())
          .then((data) => {
            const sensorDataDiv = document.getElementById("data");
            sensorDataDiv.innerHTML = `
                        <p>Temperature: ${data.temperature}Â°C</p>
                        <p>Humidity: ${data.humidity}%</p>
                        <p>Pressure: ${data.pressure} hPa</p>
                    `;
          })
          .catch((error) => {
            console.error("Error fetching data:", error);
          });
      });
      // Function to fetch JSON data and create a chart
      async function fetchAndCreateChart() {
        try {
          const response = await fetch("data1.json");
          const jsonData = await response.json();

          const ctx = document.getElementById("myChart").getContext("2d");

          new Chart(ctx, {
            type: "bar",
            data: {
              labels: ["Current"],
              datasets: [
                {
                  label: "Temp",
                  backgroundColor: "rgba(255, 99, 132, 0.2)",
                  borderColor: "rgba(255, 99, 132, 1)",
                  borderWidth: 1,
                  data: [jsonData.Temp],
                  fill: false,
                },
                {
                  label: "Humidity",
                  backgroundColor: "rgba(54, 162, 235, 0.2)",
                  borderColor: "rgba(54, 162, 235, 1)",
                  borderWidth: 1,
                  data: [jsonData.Humidity],
                  fill: false,
                },
                {
                  label: "Angle",
                  backgroundColor: "rgba(75, 192, 192, 0.2)",
                  borderColor: "rgba(75, 192, 192, 1)",
                  borderWidth: 1,
                  data: [jsonData.angle],
                  fill: false,
                },
              ],
            },
            options: {
              maintainAspectRatio: false,
              scales: {
                y: {
                  beginAtZero: true,
                  min: 0,
                },
              },
            },
          });
        } catch (error) {
          console.error("Error fetching JSON data:", error);
        }
      }

      fetchAndCreateChart();
    </script>
  </body>
</html>
